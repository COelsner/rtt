<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     13.02.2012 15:51:05                                                        

     JAXB Tasks:
	
        	This file contains all task for JAXB class creation.
        	Within this file are two tasks for complete deletion and 
        	creating of JAXB classes.
                   
     Christian Oelsner                                                               
     ====================================================================== -->
<project name="jaxb-taks">

	<dirname file="${ant.file.jaxb-taks}" property="tasks.base" />

	<!-- Some important directories -->
	<property name="project.dir" location="${tasks.base}/.." />
	<property name="rtt.src-gen" location="${project.dir}/src-gen" />
	<property name="rtt.schemes" location="${project.dir}/schemes" />
	<property name="rtt.lib" location="${project.dir}/libraries" />
	
	<!-- important libraries -->
	<property name="lib.jaxb" location="${rtt.lib}/development/jaxb"/>

	<!-- Some package definintions -->
	<property name="package.annotation" location="${rtt.src-gen}/rtt/annotation/editor/exchange" />
	
	<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
		<classpath>
			<fileset dir="${lib.jaxb}" includes="*.jar" />
		</classpath>
	</taskdef>

	<!-- Removes all classes of JAXB -->
	<target name="Clean XJC">
		<antcall target="Clean Annotations" />
	</target>

	<!-- Generate JAXB implementation -->
	<target name="XJC ALL">
		<antcall target="XJC Annotations" />
	</target>

	<!-- = = = = = = = = = = = = = = = = =
		          macrodef: JAXBClean          
	     = = = = = = = = = = = = = = = = = -->
	<macrodef name="JAXBClean">
		<attribute name="package" />
		<sequential>
			<delete failonerror="false">
				<fileset dir="${package.archive}">
					<include name="@{package}/*.java" />
				</fileset>
			</delete>
		</sequential>
	</macrodef>

	<!-- = = = = = = = = = = = = = = = = =
		          macrodef: JAXBCreate          
	     = = = = = = = = = = = = = = = = = -->
	<macrodef name="JAXBCreate">
		<attribute name="package" />
		<attribute name="schema" />
		<element name="xjc-args" implicit="yes" optional="yes" />
		<sequential>
			<xjc destdir="${rtt.src-gen}" schema="${rtt.schemes}${file.separator}@{schema}" package="@{package}" removeOldOutput="yes">
				<produces dir="${rtt.src-gen}" includes="**/@{package}/*.java"/>
				<xjc-args />
			</xjc>
		</sequential>
	</macrodef>

	<!-- ================================= 
          target: Annotations              
         ================================= -->
    <target name="Clean Annotations" description="Removes all generated files.">
        <JAXBClean package="rtt.annotation.editor.exchange"/>
    </target>
	
	<target name="XJC Annotations">
		<JAXBCreate package="rtt.annotation.editor.exchange" schema="Annotations.xsd"/>
	</target>

</project>